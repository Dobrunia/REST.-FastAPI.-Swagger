# Отчет о производительности REST vs gRPC

**Дата:** 2025-12-29 01:28:15

**Система:** Windows 10

**Python:** 3.13.7

---

## Сценарий: Sanity

### Sanity - REST

| Метрика | Значение |
|---------|----------|
| Общее количество запросов | 66 |
| Ошибки | 0 |
| RPS | 3.40 |
| Средняя латентность | 320.90 ms |
| Медианная латентность | 11.00 ms |
| p95 латентность | 2100 ms |
| p99 латентность | 2100 ms |
| Max латентность | 2131.42 ms |

**Топ запросов по количеству:**

| Метод | Запросов | Avg (ms) | p95 (ms) |
|-------|----------|----------|----------|
| GET /terms | 30 | 280.87 | 2100 |
| POST /terms | 21 | 503.89 | 2100 |
| GET /terms/XML | 2 | 6.15 | 8 |
| GET /terms/gRPC | 2 | 1025.76 | 2000 |
| GET /terms/API | 1 | 7.72 | 8 |

### Sanity - GRPC

| Метрика | Значение |
|---------|----------|
| Общее количество запросов | 127 |
| Ошибки | 0 |
| RPS | 4.27 |
| Средняя латентность | 52.86 ms |
| Медианная латентность | 7.00 ms |
| p95 латентность | 160 ms |
| p99 латентность | 190 ms |
| Max латентность | 205.94 ms |

**Топ запросов по количеству:**

| Метод | Запросов | Avg (ms) | p95 (ms) |
|-------|----------|----------|----------|
| gRPC GetTerm | 42 | 5.98 | 8 |
| gRPC GetTerms | 40 | 6.37 | 9 |
| gRPC CreateTerm | 29 | 140.03 | 180 |
| gRPC UpdateTerm | 13 | 131.90 | 170 |
| gRPC DeleteTerm | 3 | 144.08 | 190 |

## Сравнение REST vs gRPC

| Метрика | REST | gRPC | Разница |
|---------|------|------|----------|
| RPS | 3.40 | 4.27 | 25.6% |
| Avg латентность (ms) | 320.90 | 52.86 | -83.5% |
| p95 латентность (ms) | 2100 | 160 | -92.4% |
| Ошибки | 0 | 0 | - |

### Анализ

- gRPC обрабатывает на 25.6% больше запросов
- gRPC быстрее на 83.5% по средней латентности

---

## Сценарий: Normal

### Normal - REST

| Метрика | Значение |
|---------|----------|
| Общее количество запросов | 26 |
| Ошибки | 26 |
| RPS | 0.51 |
| Средняя латентность | 32051.45 ms |
| Медианная латентность | 32030.39 ms |
| p95 латентность | 32000 ms |
| p99 латентность | 32000 ms |
| Max латентность | 32067.25 ms |

**Топ запросов по количеству:**

| Метод | Запросов | Avg (ms) | p95 (ms) |
|-------|----------|----------|----------|
| POST /terms | 21 | 32049.69 | 32000 |
| PUT /terms/JSON | 1 | 32057.23 | 32000 |
| PUT /terms/JWT | 1 | 32049.80 | 32000 |
| PUT /terms/Kubernetes | 1 | 32067.16 | 32000 |
| PUT /terms/PostgreSQL | 1 | 32059.54 | 32000 |

### Normal - GRPC

| Метрика | Значение |
|---------|----------|
| Общее количество запросов | 1376 |
| Ошибки | 0 |
| RPS | 22.15 |
| Средняя латентность | 41.18 ms |
| Медианная латентность | 3.00 ms |
| p95 латентность | 140 ms |
| p99 латентность | 150 ms |
| Max латентность | 318.14 ms |

**Топ запросов по количеству:**

| Метод | Запросов | Avg (ms) | p95 (ms) |
|-------|----------|----------|----------|
| gRPC GetTerms | 536 | 2.56 | 4 |
| gRPC GetTerm | 407 | 1.83 | 3 |
| gRPC CreateTerm | 304 | 125.62 | 150 |
| gRPC UpdateTerm | 73 | 127.61 | 150 |
| gRPC DeleteTerm | 56 | 125.81 | 150 |

## Сравнение REST vs gRPC

| Метрика | REST | gRPC | Разница |
|---------|------|------|----------|
| RPS | 0.51 | 22.15 | 4262.9% |
| Avg латентность (ms) | 32051.45 | 41.18 | -99.9% |
| p95 латентность (ms) | 32000 | 140 | -99.6% |
| Ошибки | 26 | 0 | - |

### Анализ

- gRPC обрабатывает на 4262.9% больше запросов
- gRPC быстрее на 99.9% по средней латентности

---

## Сценарий: Stress

### Stress - REST

| Метрика | Значение |
|---------|----------|
| Общее количество запросов | 1586 |
| Ошибки | 1586 |
| RPS | 26.64 |
| Средняя латентность | 4416.36 ms |
| Медианная латентность | 4100.00 ms |
| p95 латентность | 4100 ms |
| p99 латентность | 32000 ms |
| Max латентность | 32075.27 ms |

**Топ запросов по количеству:**

| Метод | Запросов | Avg (ms) | p95 (ms) |
|-------|----------|----------|----------|
| GET /terms | 659 | 4099.31 | 4100 |
| POST /terms | 352 | 5290.98 | 4100 |
| GET /terms/TCP | 27 | 4095.34 | 4100 |
| GET /terms/API | 25 | 4101.81 | 4100 |
| GET /terms/GraphQL | 23 | 4099.99 | 4100 |

### Stress - GRPC

| Метрика | Значение |
|---------|----------|
| Общее количество запросов | 1615 |
| Ошибки | 0 |
| RPS | 22.99 |
| Средняя латентность | 42.01 ms |
| Медианная латентность | 7.00 ms |
| p95 латентность | 140 ms |
| p99 латентность | 160 ms |
| Max латентность | 232.47 ms |

**Топ запросов по количеству:**

| Метод | Запросов | Avg (ms) | p95 (ms) |
|-------|----------|----------|----------|
| gRPC GetTerms | 632 | 6.87 | 9 |
| gRPC GetTerm | 517 | 5.23 | 7 |
| gRPC CreateTerm | 331 | 131.23 | 150 |
| gRPC UpdateTerm | 98 | 128.15 | 140 |
| gRPC DeleteTerm | 37 | 129.76 | 180 |

## Сравнение REST vs gRPC

| Метрика | REST | gRPC | Разница |
|---------|------|------|----------|
| RPS | 26.64 | 22.99 | -13.7% |
| Avg латентность (ms) | 4416.36 | 42.01 | -99.0% |
| p95 латентность (ms) | 4100 | 140 | -96.6% |
| Ошибки | 1586 | 0 | - |

### Анализ

- REST обрабатывает на 13.7% больше запросов
- gRPC быстрее на 99.0% по средней латентности

---

## Сценарий: Stability

### Stability - REST

| Метрика | Значение |
|---------|----------|
| Общее количество запросов | 2713 |
| Ошибки | 2713 |
| RPS | 15.16 |
| Средняя латентность | 4096.64 ms |
| Медианная латентность | 4100.00 ms |
| p95 латентность | 4100 ms |
| p99 латентность | 4100 ms |
| Max латентность | 4126.43 ms |

**Топ запросов по количеству:**

| Метод | Запросов | Avg (ms) | p95 (ms) |
|-------|----------|----------|----------|
| GET /terms | 1148 | 4096.55 | 4100 |
| POST /terms | 573 | 4097.12 | 4100 |
| GET /terms/XML | 51 | 4096.59 | 4100 |
| GET /terms/Microservices | 46 | 4097.93 | 4100 |
| GET /terms/CDN | 44 | 4097.33 | 4100 |

### Stability - GRPC

| Метрика | Значение |
|---------|----------|
| Общее количество запросов | 4641 |
| Ошибки | 0 |
| RPS | 25.44 |
| Средняя латентность | 37.89 ms |
| Медианная латентность | 4.00 ms |
| p95 латентность | 130 ms |
| p99 латентность | 140 ms |
| Max латентность | 233.11 ms |

**Топ запросов по количеству:**

| Метод | Запросов | Avg (ms) | p95 (ms) |
|-------|----------|----------|----------|
| gRPC GetTerms | 1852 | 4.46 | 6 |
| gRPC GetTerm | 1458 | 1.81 | 3 |
| gRPC CreateTerm | 881 | 124.81 | 140 |
| gRPC UpdateTerm | 238 | 123.14 | 140 |
| gRPC DeleteTerm | 212 | 121.12 | 140 |

## Сравнение REST vs gRPC

| Метрика | REST | gRPC | Разница |
|---------|------|------|----------|
| RPS | 15.16 | 25.44 | 67.8% |
| Avg латентность (ms) | 4096.64 | 37.89 | -99.1% |
| p95 латентность (ms) | 4100 | 130 | -96.8% |
| Ошибки | 2713 | 0 | - |

### Анализ

- gRPC обрабатывает на 67.8% больше запросов
- gRPC быстрее на 99.1% по средней латентности

---

## Итоговое сравнение по всем сценариям

### Сводная таблица метрик

| Сценарий | Протокол | RPS | Avg латентность (ms) | p95 (ms) | Ошибки |
|----------|----------|-----|----------------------|----------|--------|
| Sanity | REST | 3.40 | 320.90 | 2100 | 0 |
| Sanity | gRPC | 4.27 | 52.86 | 160 | 0 |
| Normal | REST | 0.51 | 32051.45 | 32000 | 26 |
| Normal | gRPC | 22.15 | 41.18 | 140 | 0 |
| Stress | REST | 26.64 | 4416.36 | 4100 | 1586 |
| Stress | gRPC | 22.99 | 42.01 | 140 | 0 |
| Stability | REST | 15.16 | 4096.64 | 4100 | 2713 |
| Stability | gRPC | 25.44 | 37.89 | 130 | 0 |

### Общий анализ

**Доступные данные:** 4/4 сценария

**Детальное сравнение (сценарий Normal):**

## Сравнение REST vs gRPC

| Метрика | REST | gRPC | Разница |
|---------|------|------|----------|
| RPS | 0.51 | 22.15 | 4262.9% |
| Avg латентность (ms) | 32051.45 | 41.18 | -99.9% |
| p95 латентность (ms) | 32000 | 140 | -99.6% |
| Ошибки | 26 | 0 | - |

### Анализ

- gRPC обрабатывает на 4262.9% больше запросов
- gRPC быстрее на 99.9% по средней латентности

### Тренды производительности

- REST: RPS варьируется от 0.51 до 26.64
- gRPC: RPS варьируется от 4.27 до 25.44

### Рекомендации

1. **REST:** подходит для публичных API, простой интеграции с браузерами
2. **gRPC:** оптимален для внутренних микросервисов, требующих высокой производительности
3. **Производительность:** оба протокола показывают приемлемую производительность
4. **Масштабирование:** для production использовать PostgreSQL/MySQL вместо SQLite
5. **Мониторинг:** добавить мониторинг CPU/Memory для выявления узких мест

